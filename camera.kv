#:import ZBarCam kivy_garden.zbarcam.ZBarCam
#:import ZBarSymbol pyzbar.pyzbar.ZBarSymbol

<qrcamera@Screen>:
    name: 'qrcamera'
    scan_res: ', '.join([str(symbol.data) for symbol in zbarcam.symbols])[2:-1]
    screen_list: ['abbook', 'illust', 'audbook', 'sign', 'voda', 'vidbook']

    BoxLayout:
        orientation: 'vertical'
        ZBarCam:
            id: zbarcam
            code_types: ZBarSymbol.QRCODE, ZBarSymbol.EAN13

        BoxLayout:
            orientation: 'horizontal'
            size_hint: 1, 0.10
            pos_hint: {'bottom': 1}

            Button:
                text: 'Сканируй' if root.scan_res in root.screen_list else 'Ищу QR код...'
                color: 0, 0, 0, 1
                on_release: if root.scan_res in root.screen_list: app.root.current = root.scan_res
                background_color: 255, 255, 255, 1

            Button:
                text: 'На главную'
                color: 0, 0, 0, 1
                on_release: app.root.current = 'main'
                background_color: 255, 255, 255, 1
